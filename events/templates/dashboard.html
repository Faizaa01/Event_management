{% extends 'base.html' %}

{% block content %}
<div class="w-full min-h-screen bg-gray-700 pt-36 pb-10">

    <!-- Stats Grid -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 lg:px-10 m-8 p-8">
        <!-- Total Participants -->
        <div class="relative rounded-lg p-10 shadow-lg cursor-pointer transform transition-all duration-200 hover:scale-105 overflow-hidden" id="stat-total">
            <div class="absolute inset-0 bg-cover bg-center blur-sm"
                style="background-image: url('https://images.unsplash.com/photo-1511632765486-a01980e01a18?w=500');">
            </div>
            <div class="absolute inset-0 bg-black bg-opacity-40"></div>
            <div class="relative z-10 flex items-center justify-between">
                <div>
                    <p class="text-white text-lg font-medium opacity-90 drop-shadow-lg">Total Participants</p>
                    <p class="text-white text-3xl font-bold mt-2 drop-shadow-lg">{{ total_participants }}</p>
                </div>
                <i data-lucide="users" class="text-white h-8 w-8 opacity-90 drop-shadow-lg"></i>
            </div>
        </div>

        <!-- Total Events -->
        <a href="{% url 'dashboard' %}?type=all" class="block">
            <div class="relative rounded-lg p-10 shadow-lg cursor-pointer transform transition-all duration-200 hover:scale-105 overflow-hidden">
                <div class="absolute inset-0 bg-cover bg-center blur-sm"
                    style="background-image: url('https://images.unsplash.com/photo-1540575467063-178a50c2df87?w=500');">
                </div>
                <div class="absolute inset-0 bg-black bg-opacity-40"></div>
                <div class="relative z-10 flex items-center justify-between">
                    <div>
                        <p class="text-white text-lg font-medium opacity-90 drop-shadow-lg">Total Events</p>
                        <p class="text-white text-3xl font-bold mt-2 drop-shadow-lg">{{ total_events }}</p>
                    </div>
                    <i data-lucide="calendar" class="text-white h-8 w-8 opacity-90 drop-shadow-lg"></i>
                </div>
            </div>
        </a>

        <!-- Upcoming Events -->
        <a href="{% url 'dashboard' %}?type=upcoming" class="block">
            <div class="relative rounded-lg p-10 shadow-lg cursor-pointer transform transition-all duration-200 hover:scale-105 overflow-hidden">
                <div class="absolute inset-0 bg-cover bg-center blur-sm"
                    style="background-image: url('https://images.unsplash.com/photo-1552664730-d307ca884978?w=500');"></div>
                <div class="absolute inset-0 bg-black bg-opacity-40"></div>
                <div class="relative z-10 flex items-center justify-between">
                    <div>
                        <p class="text-white text-lg font-medium opacity-90 drop-shadow-lg">Upcoming Events</p>
                        <p class="text-white text-3xl font-bold mt-2 drop-shadow-lg">{{ upcoming_events }}</p>
                    </div>
                    <i data-lucide="clock" class="text-white h-8 w-8 opacity-90 drop-shadow-lg"></i>
                </div>
            </div>
        </a>

        <!-- Past Events -->
        <a href="{% url 'dashboard' %}?type=past" class="block">
            <div class="relative rounded-lg p-10 shadow-lg cursor-pointer transform transition-all duration-200 hover:scale-105 overflow-hidden">
                <div class="absolute inset-0 bg-cover bg-center blur-sm"
                    style="background-image: url('https://images.unsplash.com/photo-1531058020387-3be344556be6?w=500');">
                </div>
                <div class="absolute inset-0 bg-black bg-opacity-40"></div>
                <div class="relative z-10 flex items-center justify-between">
                    <div>
                        <p class="text-white text-lg font-medium opacity-90 drop-shadow-lg">Past Events</p>
                        <p class="text-white text-3xl font-bold mt-2 drop-shadow-lg">{{ past_events }}</p>
                    </div>
                    <i data-lucide="check-circle" class="text-white h-8 w-8 opacity-90 drop-shadow-lg"></i>
                </div>
            </div>
        </a>
    </div>

    <!-- Today's Events -->
    <div class="bg-gray-500 rounded-lg shadow-lg p-8 m-14">
        <div class="flex items-center justify-between mb-6">
            <h2 class="text-2xl font-bold">
                {% if type == 'upcoming' %}
                    Upcoming Events
                {% elif type == 'past' %}
                    Past Events
                {% elif type == 'all' %}
                    All Events
                {% else %}
                    Today's Events
                {% endif %}
            </h2>
        </div>

        <!-- Table Header -->
        <div class="hidden sm:grid grid-cols-4 gap-4 p-4 bg-black rounded-lg mb-4 font-semibold text-gray-400 text-sm sm:text-base">
            <div>Event Name</div>
            <div>Date</div>
            <div>Location</div>
            <div>Total Participants</div>
        </div>
        <!-- Events List -->
        <div class="space-y-4">
        {% for event in events_list %}
        <div
            class="bg-gray-100 rounded-lg border-l-4 border-gray-700 p-4 grid grid-cols-1 sm:grid-cols-4 gap-4 items-start sm:items-center text-sm sm:text-base">

            <!-- Event Name -->
            <div class="font-semibold text-gray-900 flex items-center space-x-2">
            <i class="fa-regular fa-circle"></i>
            <span>{{ event.name }}</span>
            </div>

            <!-- Date -->
            <div class="font-semibold text-gray-900 flex items-center space-x-2">
            <i class="fa-regular fa-clipboard"></i>
            <span>{{ event.date }}</span>
            </div>

            <!-- Location -->
            <div class="font-medium text-gray-900 flex items-center space-x-2 truncate">
            <i class="fa-solid fa-location-dot"></i>
            <span>{{ event.location }}</span>
            </div>

            <!-- Participants + Details Button -->
            <div class="font-medium text-gray-900 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2">
            <span>{{ event.participants.count }}</span>
            <a href="{% url 'Event-details' event.id %}"
                class="bg-gray-800 hover:bg-indigo-400 text-white px-4 py-2 rounded-lg text-xs sm:text-sm font-medium transition-colors whitespace-nowrap">
                Details
            </a>
            </div>

        </div>
        {% empty %}
        <p class="text-gray-400 text-sm px-4">No events today.</p>
        {% endfor %}
        </div>
    </div>
</div>

{% endblock %}
